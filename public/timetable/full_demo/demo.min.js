$(document).ready(function(){var a=$("#calendar");var b=10;a.weekCalendar({displayOddEven:true,timeslotsPerHour:4,allowCalEventOverlap:true,overlapEventsSeparate:true,firstDayOfWeek:1,businessHours:{start:8,end:18,limitDisplay:true},daysToShow:7,switchDisplay:{"1 day":1,"3 next days":3,"work week":5,"full week":7},title:function(j){return j==1?"%date%":"%start% - %end%"},height:function(j){return $(window).height()-$("h1").outerHeight()-1},eventRender:function(k,j){if(k.end.getTime()<new Date().getTime()){j.css("backgroundColor","#aaa");j.find(".wc-time").css({backgroundColor:"#999",border:"1px solid #888"})}},draggable:function(k,j){return k.readOnly!=true},resizable:function(k,j){return k.readOnly!=true},eventNew:function(p,o){var l=$("#event_edit_container");h(l);var n=l.find("select[name='start']").val(p.start);var j=l.find("select[name='end']").val(p.end);var k=l.find("input[name='title']");var m=l.find("textarea[name='body']");l.dialog({modal:true,title:"New Calendar Event",close:function(){l.dialog("destroy");l.hide();$("#calendar").weekCalendar("removeUnsavedEvents")},buttons:{save:function(){p.id=b;b++;p.start=new Date(n.val());p.end=new Date(j.val());p.title=k.val();p.body=m.val();a.weekCalendar("removeUnsavedEvents");a.weekCalendar("updateEvent",p);l.dialog("close")},cancel:function(){l.dialog("close")}}}).show();l.find(".date_holder").text(a.weekCalendar("formatDate",p.start));g(n,j,p,a.weekCalendar("getTimeslotTimes",p.start))},eventDrop:function(k,j){},eventResize:function(k,j){},eventClick:function(p,o){if(p.readOnly){return}var l=$("#event_edit_container");h(l);var n=l.find("select[name='start']").val(p.start);var j=l.find("select[name='end']").val(p.end);var k=l.find("input[name='title']").val(p.title);var m=l.find("textarea[name='body']");m.val(p.body);l.dialog({modal:true,title:"Edit - "+p.title,close:function(){l.dialog("destroy");l.hide();$("#calendar").weekCalendar("removeUnsavedEvents")},buttons:{save:function(){p.start=new Date(n.val());p.end=new Date(j.val());p.title=k.val();p.body=m.val();a.weekCalendar("updateEvent",p);l.dialog("close")},"delete":function(){a.weekCalendar("removeEvent",p.id);l.dialog("close")},cancel:function(){l.dialog("close")}}}).show();var n=l.find("select[name='start']").val(p.start);var j=l.find("select[name='end']").val(p.end);l.find(".date_holder").text(a.weekCalendar("formatDate",p.start));g(n,j,p,a.weekCalendar("getTimeslotTimes",p.start));$(window).resize().resize()},eventMouseover:function(k,j){},eventMouseout:function(k,j){},noEvents:function(){},data:function(l,j,k){k(d())}});function h(j){j.find("input").val("");j.find("textarea").val("")}function d(){var k=new Date().getFullYear();var l=new Date().getMonth();var j=new Date().getDate();return{events:[{id:1,start:new Date(k,l,j,12),end:new Date(k,l,j,13,30),title:"Lunch with Mike"},{id:2,start:new Date(k,l,j,14),end:new Date(k,l,j,14,45),title:"Dev Meeting"},{id:3,start:new Date(k,l,j+1,17),end:new Date(k,l,j+1,17,45),title:"Hair cut"},{id:4,start:new Date(k,l,j-1,8),end:new Date(k,l,j-1,9,30),title:"Team breakfast"},{id:5,start:new Date(k,l,j+1,14),end:new Date(k,l,j+1,15),title:"Product showcase"},{id:6,start:new Date(k,l,j,10),end:new Date(k,l,j,11),title:"I'm read-only",readOnly:true},{id:7,start:new Date(k,l,j+2,17),end:new Date(k,l,j+3,9),title:"Multiday"}]}}function g(k,q,r,n){k.empty();q.empty();for(var o=0;o<n.length;o++){var l=n[o].start;var p=n[o].end;var m="";if(l.getTime()===r.start.getTime()){m='selected="selected"'}var j="";if(p.getTime()===r.end.getTime()){j='selected="selected"'}k.append('<option value="'+l+'" '+m+">"+n[o].startFormatted+"</option>");q.append('<option value="'+p+'" '+j+">"+n[o].endFormatted+"</option>");i.start[n[o].startFormatted]=l.getTime();i.end[n[o].endFormatted]=p.getTime()}e=q.find("option");k.trigger("change")}var f=$("select[name='end']");var e=f.find("option");var i={start:[],end:[]};$("select[name='start']").change(function(){var l=i.start[$(this).find(":selected").text()];var k=f.find("option:selected").val();f.html(e.filter(function(){return l<i.end[$(this).text()]}));var j=false;f.find("option").each(function(){if($(this).val()===k){$(this).attr("selected","selected");j=true;return false}});if(!j){f.find("option:eq(1)").attr("selected","selected")}});var c=$("#about");$("#about_button").click(function(){c.dialog({title:"About this calendar demo",width:600,close:function(){c.dialog("destroy");c.hide()},buttons:{close:function(){c.dialog("close")}}}).show()})});